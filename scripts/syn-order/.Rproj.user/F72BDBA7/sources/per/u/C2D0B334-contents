install.packages('ggplot2')
install.packages('gghalves')
install.packages('readr')
library(ggplot2)
library(gghalves)
library(readr)

RES_STATIC <- 'D:\Projects\MSc-Dissertation\population-synthesis\data\results\static'
  
# 读取数据
df <- read_csv(file.path(RES_STATIC, "JSD_syn_ord.csv"))

# 保证 pop_size 顺序（数值排序）
df$pop_size <- factor(df$pop_size, levels = sort(unique(df$pop_size)))

# 绘图
p <- ggplot(df, aes(x = pop_size, y = Order_Category)) +
  # 半边小提琴（右边）
  geom_half_violin(
    side = "r", 
    aes(fill = pop_size),
    alpha = 0.5,
    width = 0.8,
    trim = FALSE,
    show.legend = FALSE
  ) +
  # 半边散点（左边，模仿 point_panel）
  geom_half_point(
    side = "l",
    range_scale = 0.4,
    shape = 21,
    fill = "white",
    color = "black",
    size = 2
  ) +
  # 设置对数 x 轴
  scale_x_discrete(labels = function(x) parse(text = paste0("10^", log10(as.numeric(x))))) +
  scale_y_continuous(name = "Jenson-Shannon Divergence") +
  xlab("Simulation Scale (pop_size)") +
  theme_classic(base_family = "Times New Roman") +
  theme(
    axis.text.x = element_text(size = 12),
    axis.title = element_text(size = 14)
  )

print(p)
